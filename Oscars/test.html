---
title: Oscar Winners
layout: circularstackedbarplot
---

<div class="container-fluid" style="height:960px;">
  <svg width="960" height="960" class="center"></svg>
  <div id="tooltip" class="center"><h3>Oscar Winners & Nominees:<br/>Percentage Seen<br/>by Award Ceremony</h3></div>
  <script>
  var svg = d3.select("svg"),
      width = +svg.attr("width"),
      height = +svg.attr("height"),
      innerRadius = 130,
      outerRadius = Math.min(width, height) / 2,
      g = svg.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

  var x = d3.scaleBand()
      .range([0, 2 * Math.PI])
      .align(0);

  var y = d3.scaleRadial()
      .range([innerRadius, outerRadius]);

  var z = d3.scaleOrdinal()
      .range(["#94F2D0", "#69BFA0", "#C1D9D2", "#9AA692", "#a05d56", "#d0743c", "#ff8c00"]);

  var tooltip = d3.select('#tooltip');

  d3.csv("https://jacobmgreer.github.io/Film-Tracker/Oscars/OscarsSummary.csv", function(d, i, columns) {
    for (i = 1, t = 0; i < columns.length; ++i) t += d[columns[i]] = +d[columns[i]];
    d.total = t;
    return d;
  }, function(error, data) {
    if (error) throw error;

    x.domain(data.map(function(d) { return d.AwardCeremony; }));
    y.domain([0, d3.max(data, function(d) { return d.total; })]);
    z.domain(data.columns.slice(1));

    g.append("g")
      .selectAll("g")
      .data(d3.stack().keys(data.columns.slice(1))(data))
      .enter().append("g")
        .attr("fill", function(d) { return z(d.key); })
      .selectAll("path")
      .data(function(d) { return d; })
      .enter().append("path")
        .attr("d", d3.arc()
            .innerRadius(function(d) { return y(d[0]); })
            .outerRadius(function(d) { return y(d[1]); })
            .startAngle(function(d) { return x(d.data.AwardCeremony); })
            .endAngle(function(d) { return x(d.data.AwardCeremony) + x.bandwidth(); })
            .padAngle(0.01)
            .padRadius(innerRadius))
      .on('mouseover', function(d) {
        tooltip
          .style('display', 'block')
          .html('<h1>' + d.data.AwardCeremony + '</h1>');
      })
      .on('click', function(d) {awardTable(d.data.AwardCeremony)})
      .on('mouseout', function(d) {tooltip.html('<h3>Oscar Winners & Nominees:<br/>Percentage Seen<br/>by Award Ceremony</h3>');})
  });
  </script>
</div>
<div class="container-fluid">
  <div class="movie-counts">
    <div class="movies-prime"></div>
    <div class="movies-total"></div>
  </div>
  
  <script type="text/javascript">
  function awardTable(ceremony) {
    $(".table-prime").empty();
    var data = [];
    d3.csv('https://raw.githubusercontent.com/jacobmgreer/Film-Tracker/master/output/OscarCeremonies.csv', function(data){
    		var data = data.filter(element => element.AwardCeremony === ceremony)
        var nested_data = d3.nest()
                            .key(function(d) { return d.AwardCeremony; })
                            .key(function(d) { return d.AwardCategory; })
                            .entries(data);
                            //console.log(nested_data)
                            //console.log(nested_data[[0]].values)
        doSomething(nested_data);
    })
    
    function doSomething(d){
          
    	var columns = ['AwardWinner','FilmName','PersonName']
    
      var AwardCeremonies = d3.select('.table-prime').selectAll('div')
        .data(d)
        .enter()
        .append('div')
        .text(function(d){return d.key})
        
      var data1 = function(d) {return d.values}
        
      var AwardCategories = AwardCeremonies.selectAll('div')
       	.data(data1)
        .enter()
        .append('p')
        .text(function(d){return d.key})
        .append('table')
        .classed('table', true)
        .classed('table-striped', true)
      
      var data2 = function(d) {return d.values}
      
      var rows = AwardCategories.selectAll('tr')
          .data(data2)
          .enter()
          .append('tr')
          
      var nominee = rows.selectAll('td')
          .data(function (row) {
                return columns.map(function (column) {
                  return { column: column, value: row[column]}
                })
              })
          .enter()
          .append('td')
          .html(function(d){return d.value})
    
     }
  }
  </script>
  
  <h1 class="display-5">Oscar Winning films on Amazon Prime</h1>
  <div class="table-prime"></div>
  
  <br clear="all"/><br/>
</div>